<ion-view view-title="Fortune" >
  <ion-content class="padding">
    <div ng-module="app.portfolio" ng-controller="PortfolioController as ctrl">

        <br>
        <br>
        <button class="button button-block button-positive button-small" ng-click = "toggleViews('currentInvestments')">Current Investments</button> 
        <button class="button button-block button-positive button-small" ng-click = "toggleViews('transactionHistory')">Transaction History</button>
        <button class="button button-block button-positive button-small" ng-click = "toggleOpenTransactions()">Open Transactions</button>
         <!-- Current Investments View -->
    <!-- <div class="row">
      <div class="col col-top">.col</div>
      <div class="col col-center">.col</div>
      <div class="col col-bottom">.col</div>
      <div class="col">1<br>2<br>3<br>4</div>
    </div> -->
      <div class = "table" ng-show  = "currentInvestmentsView">
       <h4> Your Current Investments </h4>
        <div class="row tableHeader">
          <div class="col">Name</div>
          <div class="col">Market Value</div>
          <div class="col">Shares Owned</div>
          <div class="col">Overall Profit</div>
          <div class="col"> </div>
        </div>
        <div ng-repeat = "investment in investments" class="row" ng-init = 'getScores(investment.target_id, investment)'>
          <div class="col col-center name">{{investment.name}}</div>
          <div class="col col-center">{{investment.currentScore}}</div>
          <div class="col col-center">{{investment.numberShares}}</div>
          <div class="col col-center">{{investment.profit}}</div>
          <div class="col col-center"><button ng-click="clickSell(investment)" class="button button-positive button-small">Sell</button></div>
        </div>   
      </div>

      <div class = "table" ng-show  = "transactionHistoryView">
        <h4> Your Transaction History </h4>
        <div class = "button-bar">
        <button ng-click = "tableVersion = false" class="button button-positive button-small">Human friendly</button><button ng-click = "tableVersion = true" class="button button-positive button-small">Table</button>
        </div>
      
        <!-- Transaction History View -->
        <div ng-repeat="transaction in transactions" ng-init = "buildHistString(transaction)" ng-show = "transactionHistoryView && !tableVersion">
          <p>{{transaction.string}}</p>
        </div>

        <div ng-show = 'transactionHistoryView &&tableVersion'>
          <div class="row tableHeader">
            <div class="col">Name</div>
            <div class="col">Type</div>
            <div class="col">Shares</div>
            <div class="col">Karma</div>
          </div>
          <div ng-repeat = "transaction in transactions" class="row" >
            <div class="col col-center">{{transaction.target_name}}</div>
            <div class="col col-center">{{transaction.type}}</div>
            <div class="col col-center">{{transaction.numberShares}}</div>
            <div class="col col-center">{{transaction.karma}}</div>
          </div>   
        </div>
      </div>

      <div class = "table" ng-show = "openTransactionsView">
        <h4> Your Open Transactions </h4>
          <div class="row tableHeader">
            <div class="col">Name</div>
            <div class="col">Market Value</div>
            <div class="col">Type</div>
            <div class="col">Shares</div>
            <div class="col"></div>
          </div>
          <div ng-repeat = "openTransaction in openTransactions track by $index" class="row" >
            <div class="col col-center name">{{openTransaction.target_name}}</div>
            <div class="col col-center">{{openTransaction.currentScore}}</div>
            <div class="col col-center">{{openTransaction.type}}</div>
            <div class="col col-center">{{openTransaction.numberShares}}</div>
            <div class="col col-center"><button ng-click="clickCancel(openTransaction.id, $index)" class="button button-positive button-small">Cancel
            </button></div>
          </div>   
      </div>


    </div>

  </ion-content>
</ion-view>